<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Assinaturas Growin — Builder</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;margin:24px;color:#111}
  .wrap{display:grid;grid-template-columns:360px 1fr;gap:24px;align-items:start}
  label{display:block;font-size:12px;text-transform:uppercase;letter-spacing:.04em;color:#555;margin:12px 0 4px}
  input{width:100%;padding:10px 12px;border:1px solid #d0d0d0;border-radius:8px;font-size:14px}
  .card{border:1px solid #e6e6e6;border-radius:12px;padding:16px}
  .btn{display:inline-block;border:0;border-radius:10px;padding:12px 14px;font-weight:600;cursor:pointer}
  .btn-primary{background:#e6443b;color:#fff}
  .btn-ghost{background:#f6f6f6}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .hint{font-size:12px;color:#666;margin-top:6px}
  .muted{color:#777}
  .preview-wrap{background:#fff;border:1px dashed #ddd;border-radius:12px;padding:16px;overflow:auto}
  @media (max-width:900px){.wrap{grid-template-columns:1fr}}
</style>
</head>
<body>
<h1>Assinaturas Growin — Builder</h1>
<p class="muted">Campos personalizáveis: <strong>Nome</strong>, <strong>Cargo | Hobby</strong> e <strong>Telemóvel pessoal</strong>. O resto é fixo.</p>

<div class="wrap">
  <div class="card">
    <label for="name">Nome</label>
    <input id="name" placeholder="Filipa Freire" value="Filipa Freire">

    <label for="title">Cargo</label>
    <input id="title" placeholder="GRAPHIC DESIGNER" value="GRAPHIC DESIGNER">

    <label for="hobby">Hobby</label>
    <input id="hobby" placeholder="Crochet Crafter" value="Crochet Crafter">

    <label for="mobile">Telemóvel pessoal (como deve aparecer)</label>
    <input id="mobile" placeholder="(+351) 934 556 060" value="(+351) 934 556 060">

    <label for="photo">URL da foto (PNG 240×240 já com aro/círculo)</label>
    <input id="photo" placeholder="https://growinassinaturas.github.io/email-signatures/headshot-filipa-freire.png" value="https://growinassinaturas.github.io/email-signatures/headshot-filipa-freire.png">

    <label for="assetHost">Host das imagens fixas</label>
    <input id="assetHost" placeholder="https://growinassinaturas.github.io/email-signatures" value="https://growinassinaturas.github.io/email-signatures">

    <div class="row">
      <button id="copyBtn" class="btn btn-primary">Copiar assinatura</button>
      <button id="copyHtmlBtn" class="btn btn-ghost">Copiar HTML</button>
    </div>
    <div id="status" class="hint"></div>
  </div>

  <div>
    <div class="preview-wrap">
      <div id="preview"></div>
    </div>
  </div>
</div>

<script>
const qs = s=>document.querySelector(s);
const encode = s=>encodeURIComponent(s ?? "");
const digitsHref = s=>{
  const raw=(s||"").replace(/[^\d+]/g,"");
  if(/^9\d{8}$/.test(raw)) return "+351"+raw;
  return raw||"+3519XXXXXXXX";
};

function signatureHTML({name, title, hobby, mobile, photo, host}){
  const telHref=digitsHref(mobile);
  const H=(host||"https://growinassinaturas.github.io/email-signatures").replace(/\/+$/,"");

  return `
<table role="presentation" cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;font-family:Arial,Helvetica,sans-serif;color:#333;">
<tr>
<td valign="top" style="padding:12px 16px 12px 0;">
<img src="${photo}" width="120" height="120" alt="Foto de ${name}" style="display:block;border:0;width:120px;height:120px;border-radius:50%;">
</td>

<td valign="top" style="padding:12px 24px 12px 0;">
<table role="presentation" cellpadding="0" cellspacing="0" border="0">
<tr><td style="font-size:22px;font-weight:800;color:#e6443b;">${name}</td></tr>
<tr><td style="font-size:16px;font-weight:700;color:#555;">${title} | ${hobby}</td></tr>
<tr><td style="font-size:16px;color:#444;padding:6px 0;"><strong style="color:#e6443b;">T:</strong> <a href="tel:${telHref}" style="color:#444;text-decoration:none;">${mobile}</a></td></tr>
<tr><td style="font-size:14px;color:#666;padding:4px 0;">
<span style="display:inline-block;background:#e6443b;width:24px;height:24px;border-radius:50%;text-align:center;line-height:24px;margin-right:6px;">
<img src="${H}/icon-telemovel.png" width="12" height="12" style="vertical-align:middle;">
</span>
<a href="tel:+351215947950" style="color:#666;text-decoration:none;">(+351) 215 947 950</a>
</td></tr>
<tr><td style="font-size:14px;color:#666;">
<span style="display:inline-block;background:#e6443b;width:24px;height:24px;border-radius:50%;text-align:center;line-height:24px;margin-right:6px;">
<img src="${H}/icon-local.png" width="12" height="12" style="vertical-align:middle;">
</span>
Avenida da República, 57, 4.º andar, 1050-189, Lisbon
</td></tr>
</table>
</td>

<td valign="middle" style="padding:0 24px 0 0;">
<table role="presentation" height="120"><tr><td style="border-left:2px solid #e6443b;">&nbsp;</td></tr></table>
</td>

<td valign="top" style="padding:12px 0;">
<table role="presentation">
<tr><td style="padding:0 0 12px 0;"><img src="${H}/growin-logo.png" alt="Growin" style="display:block;max-width:160px;height:auto;"></td></tr>
<tr><td>
<a href="https://www.growin.com/" target="_blank" style="display:inline-block;background:#e6443b;width:32px;height:32px;border-radius:50%;text-align:center;margin-right:8px;">
<img src="${H}/icon-website.png" width="14" height="14" style="margin-top:9px;">
</a>
<a href="https://www.linkedin.com/company/growin/" target="_blank" style="display:inline-block;background:#e6443b;width:32px;height:32px;border-radius:50%;text-align:center;margin-right:8px;">
<img src="${H}/icon-linkedin.png" width="14" height="14" style="margin-top:9px;">
</a>
<img src="${H}/certificacao-iso.png" alt="BSI ISO/IEC 27017" style="max-width:120px;height:auto;vertical-align:middle;">
</td></tr>
</table>
</td>
</tr>
</table>`;
}

const state={};
function readForm(){
  Object.assign(state,{
    name:qs("#name").value||"NOME APELIDO",
    title:qs("#title").value||"CARGO",
    hobby:qs("#hobby").value||"Hobby",
    mobile:qs("#mobile").value||"(+351) 9XX XXX XXX",
    photo:qs("#photo").value||"https://growinassinaturas.github.io/email-signatures/headshot-filipa-freire.png",
    host:qs("#assetHost").value||"https://growinassinaturas.github.io/email-signatures"
  });
}
function render(){qs("#preview").innerHTML=signatureHTML(state);}
function openSignatureOnly(){
  readForm();
  const sig=signatureHTML(state);
  const doc=`<!doctype html><meta charset='utf-8'><body style="margin:24px;font-family:Arial,Helvetica,sans-serif;">${sig}</body>`;
  const w=window.open("","_blank");w.document.write(doc);w.document.close();
}
async function copyRawHTML(){
  readForm();
  const html=signatureHTML(state).trim();
  await navigator.clipboard.writeText(html);
  alert("HTML copiado!");
}
["#name","#title","#hobby","#mobile","#photo","#assetHost"].forEach(id=>{
  qs(id).addEventListener("input",()=>{readForm();render();});
});
qs("#copyBtn").addEventListener("click",e=>{e.preventDefault();openSignatureOnly();});
qs("#copyHtmlBtn").addEventListener("click",e=>{e.preventDefault();copyRawHTML();});
readForm();render();
</script>
</body>
</html>

